<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>heyuG</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

  <script type="text/javascript">

$(document).ready(function() {

function fetch_status() {
    $.get("/heyu/status", function(status) {
        $("#status").text(status);
    });
}

function handle_post(which) {
    $.post("/heyu/commands/" + which, {}, function() {
        console.log("Finished post for", which, "button");
        fetch_status();
    });
}

function set_button_handler(which) {
    $("#" + which).on("click", handle_post.bind(undefined, which));
}

set_button_handler("start");
set_button_handler("stop");
set_button_handler("all_on");
set_button_handler("all_off");

for (var i = 1; i < 9; ++i) {
    set_button_handler("hu_" + i + "_on");
    set_button_handler("hu_" + i + "_off");
}

function handle_code_selector(code) {
  $("#select_" + code).on("click", function(which) {
    console.log(arguments);
    for (var i = 1; i < 9; ++i) {
        $("#hu_" + i + "_on").prop("value", code + i + " ON");
        $("#hu_" + i + "_off").prop("value", code + i + " OFF");
    }
});
}

handle_code_selector("A");
handle_code_selector("B");
handle_code_selector("C")
handle_code_selector("D")
handle_code_selector("E")
handle_code_selector("F")
handle_code_selector("G")
handle_code_selector("H")

fetch_status();

});

  </script>

</head>
<body style="zoom: 150%">

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">
    <div class="row">
      <div class="one-third column" style="margin-top: 5%">
        <h4>Heyu X10</h4>
        <p>Control your X10 via the control board below</p>

        <input class="button-primary" id="select_A" type="button" value="A">
        <input class="button-primary" id="select_B" type="button" value="B">
        <input class="button-primary" id="select_C" type="button" value="C">
        <input class="button-primary" id="select_D" type="button" value="D">
        <input class="button-primary" id="select_E" type="button" value="E">
        <input class="button-primary" id="select_F" type="button" value="F">
        <input class="button-primary" id="select_G" type="button" value="G">
        <input class="button-primary" id="select_H" type="button" value="H">
      </div>

      <div class="two-thirds column" style="margin-top: 5%">
        <h4>X10 Status</h4>
        <pre><code id="status">
        </code></pre>

        <input class="button-primary" id="start" type="button" value="Start">
        <input class="button-primary" id="stop" type="button"  value="Stop">
        <br/>
        <input class="button-primary" id="all_on" type="button" value="All On">
        <input class="button-primary" id="all_off" type="button"  value="All Off">
        <br/>
        <input class="button-primary" id="hu_1_on" type="button" value="A1 On">
        <input class="button-primary" id="hu_1_off" type="button"  value="A1 Off">
        <br/>
        <input class="button-primary" id="hu_2_on" type="button" value="A2 On">
        <input class="button-primary" id="hu_2_off" type="button"  value="A2 Off">
        <br/>
        <input class="button-primary" id="hu_3_on" type="button" value="A3 On">
        <input class="button-primary" id="hu_3_off" type="button"  value="A3 Off">
        <br/>
        <input class="button-primary" id="hu_4_on" type="button" value="A4 On">
        <input class="button-primary" id="hu_4_off" type="button"  value="A4 Off">
        <br/>
        <input class="button-primary" id="hu_5_on" type="button" value="A5 On">
        <input class="button-primary" id="hu_5_off" type="button"  value="A5 Off">
        <br/>
        <input class="button-primary" id="hu_6_on" type="button" value="A6 On">
        <input class="button-primary" id="hu_6_off" type="button"  value="A6 Off">
        <br/>
        <input class="button-primary" id="hu_7_on" type="button" value="A7 On">
        <input class="button-primary" id="hu_7_off" type="button"  value="A7 Off">
        <br/>
        <input class="button-primary" id="hu_8_on" type="button" value="A8 On">
        <input class="button-primary" id="hu_8_off" type="button"  value="A8 Off">
      </div>
    </div>
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
